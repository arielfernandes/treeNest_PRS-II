{"remainingRequest":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/src/pages/list-tenant/listTenant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/src/pages/list-tenant/listTenant.vue","mtime":1612020295591},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/tree_nest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncm91cEJ5IGZyb20gJ2xvZGFzaC5ncm91cGJ5JwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKaW1wb3J0CUxpc3RUZW5hbnQgZnJvbSAnLi9UZW5hbnQnIApleHBvcnQgZGVmYXVsdCB7CgluYW1lOiAndGVuYW50JywKCWNvbXBvbmVudHM6IHsKCQlMaXN0VGVuYW50Cgl9LAoJZGF0YTogKCkgPT4gKHsKCQlyZWdpc3RlcjogW10sCgkJYWN0aXZlTW9udGg6IHt9Cgl9KSwKCWNyZWF0ZWQgKCkgewoJCXRoaXMuZ2V0RGF0YSgpCgl9LAoJbW91bnRlZCAoKSB7CgkJdGhpcy5zZXRBY3RpdmVNb250aCgpCgl9LAoJY29tcHV0ZWQ6IHsKCQlncm91cGVkTW9udGhzICgpIHsKCQkJbGV0IGdyb3VwZWRNb250aHMgPSBbXQoJCQljb25zdCBhZGRDdXJyZW50TW9udGggPSAoKSA9PiB7CgkJCQlncm91cGVkTW9udGhzLnB1c2goewoJCQkJCWRhdGE6IFtdLAoJCQkJCXRvdGFsOiAwLAoJCQkJCW1vbnRoOiBtb21lbnQoKS5mb3JtYXQoJ01NL1lZWVknKQoJCQkJfSkKCQkJfQoJCQlpZiAodGhpcy5yZWdpc3Rlci5sZW5ndGgpIHsKCQkJCWNvbnN0IG1vbnRocyA9IGdyb3VwQnkodGhpcy5yZWdpc3RlciwgaSA9PiAJKAoJCQkJCW1vbWVudChpLmNyZWF0ZWRBdCkuZm9ybWF0KCdNTS9ZWVlZJykKCQkJCSkpCgkJCQljb25zdCBzb3J0TW9udGhzID0gT2JqZWN0LmtleXMobW9udGhzKS5zb3J0KChhLCBiKSA9PiB7CgkJCQljb25zdCBwYXR0ZXJuID0gJ01NL1lZWVkgSEgnCgkJCQlyZXR1cm4gKG1vbWVudChgJHthfWAsIHBhdHRlcm4pLmlzQmVmb3JlKG1vbWVudChgJHtifWAsIHBhdHRlcm4pKSkgCgkJCQkJPyAtMQoJCQkJCTogKzEKCQkJCX0pCgkJCQlncm91cGVkTW9udGhzID0gc29ydE1vbnRocy5tYXAobW9udGggPT4gKHsKCQkJCQltb250aCwKCQkJCQlkYXRhOiBtb250aHNbbW9udGhdLAoJCQkJCXRvdGFsOiBtb250aHNbbW9udGhdLm1hcChpID0+ICtpLnZhbHVlKS5yZWR1Y2UoKGEsIGMpID0+IGEgKyBjLCAwKQoJCQkJfSkpCgoJCQkJY29uc3QgbGFzdE1vbnRoID0gbW9tZW50KGdyb3VwZWRNb250aHNbZ3JvdXBlZE1vbnRocy5sZW5ndGggLSAxXS5tb250aCwgJ01NL1lZWVknKQoKCQkJCWlmICghbGFzdE1vbnRoLmlzU2FtZShtb21lbnQoKSwgJ21vbnRoJykpIHsKCQkJCQlhZGRDdXJyZW50TW9udGgoKQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJYWRkQ3VycmVudE1vbnRoKCkKCQkJfQoJCQlyZXR1cm4gZ3JvdXBlZE1vbnRocyAKCQl9Cgl9LAoJbWV0aG9kczogewoJCWdldERhdGEgKCkgewoJCQljb25zdCByZWYgPSB0aGlzLiRmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihgJHt3aW5kb3cudWlkfWApCgoJCQlyZWYub24oJ3ZhbHVlJywgZGF0YSA9PiB7CgkJCQljb25zdCB2YWx1ZXMgPSBkYXRhLnZhbCgpCgkJCQl0aGlzLnJlZ2lzdGVyID0gT2JqZWN0LmtleXModmFsdWVzKS5tYXAoaSA9PiB2YWx1ZXNbaV0pCgkJCX0pCgl9LAoJc2V0QWN0aXZlTW9udGggKG1vbnRoID0gbnVsbCkgewoJCXRoaXMuYWN0aXZlTW9udGggPSBtb250aCB8fCB0aGlzLmdyb3VwZWRNb250aHNbdGhpcy5ncm91cGVkTW9udGhzLmxlbmd0aCAtIDFdCgl9LAoJZGVmaW5lQWN0aXZlTW9udGggKG1vbnRoKSB7CgkJcmV0dXJuIG1vbWVudChtb250aCwgJ01NL1lZWVknKS5pc1NhbWUobW9tZW50KCksICdtb250aCcpCgl9LAoJfQp9Cgo="},{"version":3,"sources":["listTenant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"listTenant.vue","sourceRoot":"src/pages/list-tenant","sourcesContent":["<template>\n\t<div class=\"tenant\">\n\t\t<div class=\"month-navigation\">\n\t\t\t<div\n\t\t\t:key=\"i\" \n\t\t\tclass=\"month-link\"\n\t\t\t@click=\"setActiveMonth(month)\"\n\t\t\t:class=\"{active: defineActiveMonth(month.month)}\"\n\t\t\tv-for=\"(month, i) in groupedMonths\"\n\t\t\t>\n\t\t\t\t<div class=\"month-label\">{{ month.month}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<ListTenant/>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport groupBy from 'lodash.groupby'\nimport moment from 'moment'\nimport\tListTenant from './Tenant' \nexport default {\n\tname: 'tenant',\n\tcomponents: {\n\t\tListTenant\n\t},\n\tdata: () => ({\n\t\tregister: [],\n\t\tactiveMonth: {}\n\t}),\n\tcreated () {\n\t\tthis.getData()\n\t},\n\tmounted () {\n\t\tthis.setActiveMonth()\n\t},\n\tcomputed: {\n\t\tgroupedMonths () {\n\t\t\tlet groupedMonths = []\n\t\t\tconst addCurrentMonth = () => {\n\t\t\t\tgroupedMonths.push({\n\t\t\t\t\tdata: [],\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tmonth: moment().format('MM/YYYY')\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (this.register.length) {\n\t\t\t\tconst months = groupBy(this.register, i => \t(\n\t\t\t\t\tmoment(i.createdAt).format('MM/YYYY')\n\t\t\t\t))\n\t\t\t\tconst sortMonths = Object.keys(months).sort((a, b) => {\n\t\t\t\tconst pattern = 'MM/YYYY HH'\n\t\t\t\treturn (moment(`${a}`, pattern).isBefore(moment(`${b}`, pattern))) \n\t\t\t\t\t? -1\n\t\t\t\t\t: +1\n\t\t\t\t})\n\t\t\t\tgroupedMonths = sortMonths.map(month => ({\n\t\t\t\t\tmonth,\n\t\t\t\t\tdata: months[month],\n\t\t\t\t\ttotal: months[month].map(i => +i.value).reduce((a, c) => a + c, 0)\n\t\t\t\t}))\n\n\t\t\t\tconst lastMonth = moment(groupedMonths[groupedMonths.length - 1].month, 'MM/YYYY')\n\n\t\t\t\tif (!lastMonth.isSame(moment(), 'month')) {\n\t\t\t\t\taddCurrentMonth()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taddCurrentMonth()\n\t\t\t}\n\t\t\treturn groupedMonths \n\t\t}\n\t},\n\tmethods: {\n\t\tgetData () {\n\t\t\tconst ref = this.$firebase.database().ref(`${window.uid}`)\n\n\t\t\tref.on('value', data => {\n\t\t\t\tconst values = data.val()\n\t\t\t\tthis.register = Object.keys(values).map(i => values[i])\n\t\t\t})\n\t},\n\tsetActiveMonth (month = null) {\n\t\tthis.activeMonth = month || this.groupedMonths[this.groupedMonths.length - 1]\n\t},\n\tdefineActiveMonth (month) {\n\t\treturn moment(month, 'MM/YYYY').isSame(moment(), 'month')\n\t},\n\t}\n}\n\n</script>\n\n<style scoped>\n.month-navigation {\n\tdisplay: flex;\n\twidth: calc(100% + 30px);\n\tbackground-color: #58e1ab;\n\tmargin-left: -15px;\t\n}\n.month-link {\n\tpadding: 15px;\n\tcursor: pointer;\n\ttransition: .4s;\n\ttext-align: center;\n}\n.month-link:hover {\n\tbackground-color: lightblue;\n}\n.active {\n\tbackground-color: lightblue;\n}\n.month-label {\n\tfont-size: 10pt;\n}\n.container {\n\tfont-size: 15pt;\n\tpadding-top: 15px;\n\tpadding-bottom: 15px;\n}\n</style>\n"]}]}
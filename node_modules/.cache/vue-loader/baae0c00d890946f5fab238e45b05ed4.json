{"remainingRequest":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/src/pages/list-tenant/listTenant.vue?vue&type=style&index=0&id=504842fc&scoped=true&lang=css&","dependencies":[{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/src/pages/list-tenant/listTenant.vue","mtime":1612050246855},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubW9udGgtbmF2aWdhdGlvbiB7CglkaXNwbGF5OiBmbGV4OwoJd2lkdGg6IGNhbGMoMTAwJSArIDMwcHgpOwoJYmFja2dyb3VuZC1jb2xvcjogIzU4ZTFhYjsKCW1hcmdpbi1sZWZ0OiAtMTVweDsJCn0KLm1vbnRoLWxpbmsgewoJcGFkZGluZzogMTVweDsKCWN1cnNvcjogcG9pbnRlcjsKCXRyYW5zaXRpb246IC40czsKCXRleHQtYWxpZ246IGNlbnRlcjsKfQoubW9udGgtbGluazpob3ZlciB7CgliYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGJsdWU7Cn0KLmFjdGl2ZSB7CgliYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGJsdWU7Cn0KLm1vbnRoLWxhYmVsIHsKCWZvbnQtc2l6ZTogMTBwdDsKfQouY29udGFpbmVyIHsKCWZvbnQtc2l6ZTogMTVwdDsKCXBhZGRpbmctdG9wOiAxNXB4OwoJcGFkZGluZy1ib3R0b206IDE1cHg7Cm92ZXJmbG93OiBoaWRkZW4gYXV0bzsKaGVpZ2h0OiBjYWxjKDEwMHZoIC0gNjlweCk7Cn0K"},{"version":3,"sources":["listTenant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"listTenant.vue","sourceRoot":"src/pages/list-tenant","sourcesContent":["<template>\n\t<div class=\"tenant\">\n\t\t<div class=\"month-navigation\">\n\t\t\t<div\n\t\t\t:key=\"i\" \n\t\t\tclass=\"month-link\"\n\t\t\t@click=\"setActiveMonth(month)\"\n\t\t\tv-for=\"(month, i) in groupedMonths\"\n\t\t\t:class=\"{active: month.month == activeMonth.month}\"\n\t\t\t>\n\t\t\t\t<div class=\"month-label\">{{ month.month}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<div v-if=\"activeMonth.data && !activeMonth.data.length\">\n\t\t\t\tNo new tenant\n\t\t\t</div>\n\t\t\t<template v-else>\n\t\t\t\t<ListTenant :key=\"index\" :data=\"item\" v-for=\"(item, index) in activeMonth.data\"/>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport groupBy from 'lodash.groupby'\nimport moment from 'moment'\nimport\tListTenant from './Tenant' \nexport default {\n\tname: 'tenant',\n\tcomponents: {\n\t\tListTenant\n\t},\n\tdata: () => ({\n\t\tregister: [],\n\t\tactiveMonth: {}\n\t}),\n\tcreated () {\n\t\tthis.getData()\n\t},\n\tmounted () {\n\t\tthis.setActiveMonth()\n\t},\n\tcomputed: {\n\t\tgroupedMonths () {\n\t\t\tlet groupedMonths = []\n\t\t\tconst addCurrentMonth = () => {\n\t\t\t\tgroupedMonths.push({\n\t\t\t\t\tdata: [],\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tmonth: moment().format('MM/YYYY')\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (this.register.length) {\n\t\t\t\tconst months = groupBy(this.register, i => \t(\n\t\t\t\t\tmoment(i.createdAt).format('MM/YYYY')\n\t\t\t\t))\n\t\t\t\tconst sortMonths = Object.keys(months).sort((a, b) => {\n\t\t\t\tconst pattern = 'MM/YYYY HH'\n\t\t\t\treturn (moment(`${a}`, pattern).isBefore(moment(`${b}`, pattern))) \n\t\t\t\t\t? -1\n\t\t\t\t\t: +1\n\t\t\t\t})\n\t\t\t\tgroupedMonths = sortMonths.map(month => ({\n\t\t\t\t\tmonth,\n\t\t\t\t\tdata: months[month],\n\t\t\t\t\ttotal: months[month].map(i => +i.value).reduce((a, c) => a + c, 0)\n\t\t\t\t}))\n\n\t\t\t\tconst lastMonth = moment(groupedMonths[groupedMonths.length - 1].month, 'MM/YYYY')\n\n\t\t\t\tif (!lastMonth.isSame(moment(), 'month')) {\n\t\t\t\t\taddCurrentMonth()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taddCurrentMonth()\n\t\t\t}\n\t\t\treturn groupedMonths \n\t\t}\n\t},\n\tmethods: {\n\t\tgetData () {\n\t\t\tconst ref = this.$firebase.database().ref(`${window.uid}`)\n\n\t\t\tref.on('value', data => {\n\t\t\t\tconst values = data.val()\n\t\t\t\tthis.register = Object.keys(values).map(i => values[i])\n\t\t\t})\n\t},\n\tsetActiveMonth (month = null) {\n\t\tthis.activeMonth = month || this.groupedMonths[this.groupedMonths.length - 1]\n\t},\n\t}\n}\n\n</script>\n\n<style scoped>\n.month-navigation {\n\tdisplay: flex;\n\twidth: calc(100% + 30px);\n\tbackground-color: #58e1ab;\n\tmargin-left: -15px;\t\n}\n.month-link {\n\tpadding: 15px;\n\tcursor: pointer;\n\ttransition: .4s;\n\ttext-align: center;\n}\n.month-link:hover {\n\tbackground-color: lightblue;\n}\n.active {\n\tbackground-color: lightblue;\n}\n.month-label {\n\tfont-size: 10pt;\n}\n.container {\n\tfont-size: 15pt;\n\tpadding-top: 15px;\n\tpadding-bottom: 15px;\noverflow: hidden auto;\nheight: calc(100vh - 69px);\n}\n</style>\n"]}]}
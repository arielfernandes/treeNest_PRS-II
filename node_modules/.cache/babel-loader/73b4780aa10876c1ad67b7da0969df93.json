{"remainingRequest":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/babel-loader/lib/index.js!/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/src/pages/list-tenant/listTenant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/src/pages/list-tenant/listTenant.vue","mtime":1612050246855},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eax/Documentos/CTDS/3semestre/projSoftware_II/treeNest_PRS-II/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgZ3JvdXBCeSBmcm9tICdsb2Rhc2guZ3JvdXBieSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IExpc3RUZW5hbnQgZnJvbSAnLi9UZW5hbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3RlbmFudCcsCiAgY29tcG9uZW50czogewogICAgTGlzdFRlbmFudDogTGlzdFRlbmFudAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlZ2lzdGVyOiBbXSwKICAgICAgYWN0aXZlTW9udGg6IHt9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YSgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0QWN0aXZlTW9udGgoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBncm91cGVkTW9udGhzOiBmdW5jdGlvbiBncm91cGVkTW9udGhzKCkgewogICAgICB2YXIgZ3JvdXBlZE1vbnRocyA9IFtdOwoKICAgICAgdmFyIGFkZEN1cnJlbnRNb250aCA9IGZ1bmN0aW9uIGFkZEN1cnJlbnRNb250aCgpIHsKICAgICAgICBncm91cGVkTW9udGhzLnB1c2goewogICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICB0b3RhbDogMCwKICAgICAgICAgIG1vbnRoOiBtb21lbnQoKS5mb3JtYXQoJ01NL1lZWVknKQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgaWYgKHRoaXMucmVnaXN0ZXIubGVuZ3RoKSB7CiAgICAgICAgdmFyIG1vbnRocyA9IGdyb3VwQnkodGhpcy5yZWdpc3RlciwgZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIHJldHVybiBtb21lbnQoaS5jcmVhdGVkQXQpLmZvcm1hdCgnTU0vWVlZWScpOwogICAgICAgIH0pOwogICAgICAgIHZhciBzb3J0TW9udGhzID0gT2JqZWN0LmtleXMobW9udGhzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICB2YXIgcGF0dGVybiA9ICdNTS9ZWVlZIEhIJzsKICAgICAgICAgIHJldHVybiBtb21lbnQoIiIuY29uY2F0KGEpLCBwYXR0ZXJuKS5pc0JlZm9yZShtb21lbnQoIiIuY29uY2F0KGIpLCBwYXR0ZXJuKSkgPyAtMSA6ICsxOwogICAgICAgIH0pOwogICAgICAgIGdyb3VwZWRNb250aHMgPSBzb3J0TW9udGhzLm1hcChmdW5jdGlvbiAobW9udGgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG1vbnRoOiBtb250aCwKICAgICAgICAgICAgZGF0YTogbW9udGhzW21vbnRoXSwKICAgICAgICAgICAgdG90YWw6IG1vbnRoc1ttb250aF0ubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgICAgcmV0dXJuICtpLnZhbHVlOwogICAgICAgICAgICB9KS5yZWR1Y2UoZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICByZXR1cm4gYSArIGM7CiAgICAgICAgICAgIH0sIDApCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHZhciBsYXN0TW9udGggPSBtb21lbnQoZ3JvdXBlZE1vbnRoc1tncm91cGVkTW9udGhzLmxlbmd0aCAtIDFdLm1vbnRoLCAnTU0vWVlZWScpOwoKICAgICAgICBpZiAoIWxhc3RNb250aC5pc1NhbWUobW9tZW50KCksICdtb250aCcpKSB7CiAgICAgICAgICBhZGRDdXJyZW50TW9udGgoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWRkQ3VycmVudE1vbnRoKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBncm91cGVkTW9udGhzOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciByZWYgPSB0aGlzLiRmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiIi5jb25jYXQod2luZG93LnVpZCkpOwogICAgICByZWYub24oJ3ZhbHVlJywgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICB2YXIgdmFsdWVzID0gZGF0YS52YWwoKTsKICAgICAgICBfdGhpcy5yZWdpc3RlciA9IE9iamVjdC5rZXlzKHZhbHVlcykubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWVzW2ldOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRBY3RpdmVNb250aDogZnVuY3Rpb24gc2V0QWN0aXZlTW9udGgoKSB7CiAgICAgIHZhciBtb250aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbnVsbDsKICAgICAgdGhpcy5hY3RpdmVNb250aCA9IG1vbnRoIHx8IHRoaXMuZ3JvdXBlZE1vbnRoc1t0aGlzLmdyb3VwZWRNb250aHMubGVuZ3RoIC0gMV07CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["listTenant.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"tenant\">\n\t\t<div class=\"month-navigation\">\n\t\t\t<div\n\t\t\t:key=\"i\" \n\t\t\tclass=\"month-link\"\n\t\t\t@click=\"setActiveMonth(month)\"\n\t\t\tv-for=\"(month, i) in groupedMonths\"\n\t\t\t:class=\"{active: month.month == activeMonth.month}\"\n\t\t\t>\n\t\t\t\t<div class=\"month-label\">{{ month.month}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<div v-if=\"activeMonth.data && !activeMonth.data.length\">\n\t\t\t\tNo new tenant\n\t\t\t</div>\n\t\t\t<template v-else>\n\t\t\t\t<ListTenant :key=\"index\" :data=\"item\" v-for=\"(item, index) in activeMonth.data\"/>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport groupBy from 'lodash.groupby'\nimport moment from 'moment'\nimport\tListTenant from './Tenant' \nexport default {\n\tname: 'tenant',\n\tcomponents: {\n\t\tListTenant\n\t},\n\tdata: () => ({\n\t\tregister: [],\n\t\tactiveMonth: {}\n\t}),\n\tcreated () {\n\t\tthis.getData()\n\t},\n\tmounted () {\n\t\tthis.setActiveMonth()\n\t},\n\tcomputed: {\n\t\tgroupedMonths () {\n\t\t\tlet groupedMonths = []\n\t\t\tconst addCurrentMonth = () => {\n\t\t\t\tgroupedMonths.push({\n\t\t\t\t\tdata: [],\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tmonth: moment().format('MM/YYYY')\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (this.register.length) {\n\t\t\t\tconst months = groupBy(this.register, i => \t(\n\t\t\t\t\tmoment(i.createdAt).format('MM/YYYY')\n\t\t\t\t))\n\t\t\t\tconst sortMonths = Object.keys(months).sort((a, b) => {\n\t\t\t\tconst pattern = 'MM/YYYY HH'\n\t\t\t\treturn (moment(`${a}`, pattern).isBefore(moment(`${b}`, pattern))) \n\t\t\t\t\t? -1\n\t\t\t\t\t: +1\n\t\t\t\t})\n\t\t\t\tgroupedMonths = sortMonths.map(month => ({\n\t\t\t\t\tmonth,\n\t\t\t\t\tdata: months[month],\n\t\t\t\t\ttotal: months[month].map(i => +i.value).reduce((a, c) => a + c, 0)\n\t\t\t\t}))\n\n\t\t\t\tconst lastMonth = moment(groupedMonths[groupedMonths.length - 1].month, 'MM/YYYY')\n\n\t\t\t\tif (!lastMonth.isSame(moment(), 'month')) {\n\t\t\t\t\taddCurrentMonth()\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taddCurrentMonth()\n\t\t\t}\n\t\t\treturn groupedMonths \n\t\t}\n\t},\n\tmethods: {\n\t\tgetData () {\n\t\t\tconst ref = this.$firebase.database().ref(`${window.uid}`)\n\n\t\t\tref.on('value', data => {\n\t\t\t\tconst values = data.val()\n\t\t\t\tthis.register = Object.keys(values).map(i => values[i])\n\t\t\t})\n\t},\n\tsetActiveMonth (month = null) {\n\t\tthis.activeMonth = month || this.groupedMonths[this.groupedMonths.length - 1]\n\t},\n\t}\n}\n\n</script>\n\n<style scoped>\n.month-navigation {\n\tdisplay: flex;\n\twidth: calc(100% + 30px);\n\tbackground-color: #58e1ab;\n\tmargin-left: -15px;\t\n}\n.month-link {\n\tpadding: 15px;\n\tcursor: pointer;\n\ttransition: .4s;\n\ttext-align: center;\n}\n.month-link:hover {\n\tbackground-color: lightblue;\n}\n.active {\n\tbackground-color: lightblue;\n}\n.month-label {\n\tfont-size: 10pt;\n}\n.container {\n\tfont-size: 15pt;\n\tpadding-top: 15px;\n\tpadding-bottom: 15px;\noverflow: hidden auto;\nheight: calc(100vh - 69px);\n}\n</style>\n"],"sourceRoot":"src/pages/list-tenant"}]}